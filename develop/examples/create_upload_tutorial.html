<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Dataset upload tutorial &#8212; OpenML 0.9.0 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/codehighlightstyle.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>
  
  <a href="https://github.com/openml/openml-python"
     class="visible-desktop hidden-xs"><img
    id="gh-banner"
    style="position: absolute; top: 50px; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
    alt="Fork me on GitHub"></a>
  <script>
    // Adjust banner height.
    $(function () {
      var navHeight = $(".navbar .container").css("height");
      $("#gh-banner").css("top", navHeight);
    });
  </script>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          OpenML</a>
        <span class="navbar-text navbar-version pull-left"><b>0.9.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../index.html">Start</a></li>
                <li><a href="../usage.html">User Guide</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="index.html">Examples</a></li>
                <li><a href="../contributing.html">Contributing</a></li>
                <li><a href="../progress.html">Changelog</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Dataset upload tutorial</a></li>
<li><a class="reference internal" href="#dataset-is-a-numpy-array">Dataset is a numpy array</a><ul>
<li><a class="reference internal" href="#prepare-dataset">Prepare dataset</a></li>
<li><a class="reference internal" href="#create-the-dataset-object">Create the dataset object</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dataset-is-a-list">Dataset is a list</a></li>
<li><a class="reference internal" href="#dataset-is-a-pandas-dataframe">Dataset is a pandas DataFrame</a></li>
<li><a class="reference internal" href="#dataset-is-a-sparse-matrix">Dataset is a sparse matrix</a></li>
<li><a class="reference internal" href="#dataset-is-a-pandas-sparse-dataframe">Dataset is a pandas sparse dataframe</a></li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-create-upload-tutorial-py"><span class="std std-ref">here</span></a> to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="dataset-upload-tutorial">
<span id="sphx-glr-examples-create-upload-tutorial-py"></span><h1>Dataset upload tutorial<a class="headerlink" href="#dataset-upload-tutorial" title="Permalink to this headline">¶</a></h1>
<p>A tutorial on how to create and upload a dataset to OpenML.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">sklearn.datasets</span>
<span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="k">import</span> <span class="n">coo_matrix</span>

<span class="kn">import</span> <span class="nn">openml</span>
<span class="kn">from</span> <span class="nn">openml.datasets.functions</span> <span class="k">import</span> <span class="n">create_dataset</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This example uploads data. For that reason, this example
connects to the test server at test.openml.org. This prevents the main
server from crowding with example datasets, tasks, runs, and so on.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openml</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">start_using_configuration_for_example</span><span class="p">()</span>
</pre></div>
</div>
<p>Below we will cover the following cases of the dataset object:</p>
<ul class="simple">
<li><p>A numpy array</p></li>
<li><p>A list</p></li>
<li><p>A pandas dataframe</p></li>
<li><p>A sparse matrix</p></li>
<li><p>A pandas sparse dataframe</p></li>
</ul>
</div>
<div class="section" id="dataset-is-a-numpy-array">
<h1>Dataset is a numpy array<a class="headerlink" href="#dataset-is-a-numpy-array" title="Permalink to this headline">¶</a></h1>
<p>A numpy array can contain lists in the case of dense data or it can contain
OrderedDicts in the case of sparse data.</p>
<div class="section" id="prepare-dataset">
<h2>Prepare dataset<a class="headerlink" href="#prepare-dataset" title="Permalink to this headline">¶</a></h2>
<p>Load an example dataset from scikit-learn which we will upload to OpenML.org
via the API.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">diabetes</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">load_diabetes</span><span class="p">()</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Diabetes(scikit-learn)&#39;</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">data</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">target</span>
<span class="n">attribute_names</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">feature_names</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">DESCR</span>
</pre></div>
</div>
<p>OpenML does not distinguish between the attributes and targets on the data
level and stores all data in a single matrix.</p>
<p>The target feature is indicated as meta-data of the dataset (and tasks on
that data).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">attribute_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">attribute_names</span><span class="p">)</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">attribute_name</span><span class="p">,</span> <span class="s1">&#39;REAL&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">attribute_name</span> <span class="ow">in</span> <span class="n">attribute_names</span>
<span class="p">]</span> <span class="o">+</span> <span class="p">[(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;INTEGER&#39;</span><span class="p">)]</span>
<span class="n">citation</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;Bradley Efron, Trevor Hastie, Iain Johnstone and &quot;</span>
    <span class="s2">&quot;Robert Tibshirani (2004) (Least Angle Regression) &quot;</span>
    <span class="s2">&quot;Annals of Statistics (with discussion), 407-499&quot;</span>
<span class="p">)</span>
<span class="n">paper_url</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">&#39;http://web.stanford.edu/~hastie/Papers/&#39;</span>
    <span class="s1">&#39;LARS/LeastAngle_2002.pdf&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="create-the-dataset-object">
<h2>Create the dataset object<a class="headerlink" href="#create-the-dataset-object" title="Permalink to this headline">¶</a></h2>
<p>The definition of all fields can be found in the XSD files describing the
expected format:</p>
<p><a class="reference external" href="https://github.com/openml/OpenML/blob/master/openml_OS/views/pages/api_new/v1/xsd/openml.data.upload.xsd">https://github.com/openml/OpenML/blob/master/openml_OS/views/pages/api_new/v1/xsd/openml.data.upload.xsd</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">diabetes_dataset</span> <span class="o">=</span> <span class="n">create_dataset</span><span class="p">(</span>
    <span class="c1"># The name of the dataset (needs to be unique).</span>
    <span class="c1"># Must not be longer than 128 characters and only contain</span>
    <span class="c1"># a-z, A-Z, 0-9 and the following special characters: _\-\.(),</span>
    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
    <span class="c1"># Textual description of the dataset.</span>
    <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
    <span class="c1"># The person who created the dataset.</span>
    <span class="n">creator</span><span class="o">=</span><span class="s2">&quot;Bradley Efron, Trevor Hastie, &quot;</span>
            <span class="s2">&quot;Iain Johnstone and Robert Tibshirani&quot;</span><span class="p">,</span>
    <span class="c1"># People who contributed to the current version of the dataset.</span>
    <span class="n">contributor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="c1"># The date the data was originally collected, given by the uploader.</span>
    <span class="n">collection_date</span><span class="o">=</span><span class="s1">&#39;09-01-2012&#39;</span><span class="p">,</span>
    <span class="c1"># Language in which the data is represented.</span>
    <span class="c1"># Starts with 1 upper case letter, rest lower case, e.g. &#39;English&#39;.</span>
    <span class="n">language</span><span class="o">=</span><span class="s1">&#39;English&#39;</span><span class="p">,</span>
    <span class="c1"># License under which the data is/will be distributed.</span>
    <span class="n">licence</span><span class="o">=</span><span class="s1">&#39;BSD (from scikit-learn)&#39;</span><span class="p">,</span>
    <span class="c1"># Name of the target. Can also have multiple values (comma-separated).</span>
    <span class="n">default_target_attribute</span><span class="o">=</span><span class="s1">&#39;class&#39;</span><span class="p">,</span>
    <span class="c1"># The attribute that represents the row-id column, if present in the</span>
    <span class="c1"># dataset.</span>
    <span class="n">row_id_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="c1"># Attributes that should be excluded in modelling, such as identifiers and</span>
    <span class="c1"># indexes.</span>
    <span class="n">ignore_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="c1"># How to cite the paper.</span>
    <span class="n">citation</span><span class="o">=</span><span class="n">citation</span><span class="p">,</span>
    <span class="c1"># Attributes of the data</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="c1"># A version label which is provided by the user.</span>
    <span class="n">version_label</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span>
    <span class="n">original_data_url</span><span class="o">=</span><span class="p">(</span>
        <span class="s1">&#39;http://www4.stat.ncsu.edu/~boos/var.select/diabetes.html&#39;</span>
    <span class="p">),</span>
    <span class="n">paper_url</span><span class="o">=</span><span class="n">paper_url</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upload_did</span> <span class="o">=</span> <span class="n">diabetes_dataset</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;URL for dataset: </span><span class="si">%s</span><span class="s1">/data/</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">openml</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">server</span><span class="p">,</span> <span class="n">upload_did</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>URL for dataset: https://test.openml.org/api/v1/xml/data/15185
</pre></div>
</div>
</div>
</div>
<div class="section" id="dataset-is-a-list">
<h1>Dataset is a list<a class="headerlink" href="#dataset-is-a-list" title="Permalink to this headline">¶</a></h1>
<p>A list can contain lists in the case of dense data or it can contain
OrderedDicts in the case of sparse data.</p>
<p>Weather dataset:
<a class="reference external" href="http://storm.cis.fordham.edu/~gweiss/data-mining/datasets.html">http://storm.cis.fordham.edu/~gweiss/data-mining/datasets.html</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;sunny&#39;</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;sunny&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="s1">&#39;TRUE&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;overcast&#39;</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">86</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;rainy&#39;</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;rainy&#39;</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;rainy&#39;</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="s1">&#39;TRUE&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;overcast&#39;</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="s1">&#39;TRUE&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;sunny&#39;</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;sunny&#39;</span><span class="p">,</span> <span class="mi">69</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;rainy&#39;</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;sunny&#39;</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="s1">&#39;TRUE&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;overcast&#39;</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="s1">&#39;TRUE&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;overcast&#39;</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;rainy&#39;</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="s1">&#39;TRUE&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">],</span>
<span class="p">]</span>

<span class="n">attribute_names</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;outlook&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;sunny&#39;</span><span class="p">,</span> <span class="s1">&#39;overcast&#39;</span><span class="p">,</span> <span class="s1">&#39;rainy&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;REAL&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;humidity&#39;</span><span class="p">,</span> <span class="s1">&#39;REAL&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;windy&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;TRUE&#39;</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;play&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">]),</span>
<span class="p">]</span>

<span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">&#39;The weather problem is a tiny dataset that we will use repeatedly&#39;</span>
    <span class="s1">&#39; to illustrate machine learning methods. Entirely fictitious, it &#39;</span>
    <span class="s1">&#39;supposedly concerns the conditions that are suitable for playing &#39;</span>
    <span class="s1">&#39;some unspecified game. In general, instances in a dataset are &#39;</span>
    <span class="s1">&#39;characterized by the values of features, or attributes, that measure &#39;</span>
    <span class="s1">&#39;different aspects of the instance. In this case there are four &#39;</span>
    <span class="s1">&#39;attributes: outlook, temperature, humidity, and windy. &#39;</span>
    <span class="s1">&#39;The outcome is whether to play or not.&#39;</span>
<span class="p">)</span>

<span class="n">citation</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">&#39;I. H. Witten, E. Frank, M. A. Hall, and ITPro,&#39;</span>
    <span class="s1">&#39;Data mining practical machine learning tools and techniques, &#39;</span>
    <span class="s1">&#39;third edition. Burlington, Mass.: Morgan Kaufmann Publishers, 2011&#39;</span>
<span class="p">)</span>

<span class="n">weather_dataset</span> <span class="o">=</span> <span class="n">create_dataset</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Weather&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
    <span class="n">creator</span><span class="o">=</span><span class="s1">&#39;I. H. Witten, E. Frank, M. A. Hall, and ITPro&#39;</span><span class="p">,</span>
    <span class="n">contributor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection_date</span><span class="o">=</span><span class="s1">&#39;01-01-2011&#39;</span><span class="p">,</span>
    <span class="n">language</span><span class="o">=</span><span class="s1">&#39;English&#39;</span><span class="p">,</span>
    <span class="n">licence</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">default_target_attribute</span><span class="o">=</span><span class="s1">&#39;play&#39;</span><span class="p">,</span>
    <span class="n">row_id_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">ignore_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">citation</span><span class="o">=</span><span class="n">citation</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attribute_names</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">version_label</span><span class="o">=</span><span class="s1">&#39;example&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upload_did</span> <span class="o">=</span> <span class="n">weather_dataset</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;URL for dataset: </span><span class="si">%s</span><span class="s1">/data/</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">openml</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">server</span><span class="p">,</span> <span class="n">upload_did</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>URL for dataset: https://test.openml.org/api/v1/xml/data/15186
</pre></div>
</div>
</div>
<div class="section" id="dataset-is-a-pandas-dataframe">
<h1>Dataset is a pandas DataFrame<a class="headerlink" href="#dataset-is-a-pandas-dataframe" title="Permalink to this headline">¶</a></h1>
<p>It might happen that your dataset is made of heterogeneous data which can be
usually stored as a Pandas DataFrame. DataFrame offers the adavantages to
store the type of data for each column as well as the attribute names.
Therefore, when providing a Pandas DataFrame, OpenML can infer those
information without the need to specifically provide them when calling the
function <code class="xref py py-func docutils literal notranslate"><span class="pre">create_dataset()</span></code>. In this regard, you only need to pass
<code class="docutils literal notranslate"><span class="pre">'auto'</span></code> to the <code class="docutils literal notranslate"><span class="pre">attributes</span></code> parameter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">col_name</span> <span class="k">for</span> <span class="n">col_name</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">attribute_names</span><span class="p">])</span>
<span class="c1"># enforce the categorical column to have a categorical dtype</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;outlook&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;outlook&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;windy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;windy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;play&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;play&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 14 entries, 0 to 13
Data columns (total 5 columns):
outlook        14 non-null category
temperature    14 non-null int64
humidity       14 non-null int64
windy          14 non-null bool
play           14 non-null category
dtypes: bool(1), category(2), int64(2)
memory usage: 546.0 bytes
None
</pre></div>
</div>
<p>We enforce the column ‘outlook’, ‘windy’, and ‘play’ to be a categorical
dtype while the column ‘rnd_str’ is kept as a string column. Then, we can
call <code class="xref py py-func docutils literal notranslate"><span class="pre">create_dataset()</span></code> by passing the dataframe and fixing the parameter
<code class="docutils literal notranslate"><span class="pre">attributes</span></code> to <code class="docutils literal notranslate"><span class="pre">'auto'</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">weather_dataset</span> <span class="o">=</span> <span class="n">create_dataset</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Weather&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
    <span class="n">creator</span><span class="o">=</span><span class="s1">&#39;I. H. Witten, E. Frank, M. A. Hall, and ITPro&#39;</span><span class="p">,</span>
    <span class="n">contributor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection_date</span><span class="o">=</span><span class="s1">&#39;01-01-2011&#39;</span><span class="p">,</span>
    <span class="n">language</span><span class="o">=</span><span class="s1">&#39;English&#39;</span><span class="p">,</span>
    <span class="n">licence</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">default_target_attribute</span><span class="o">=</span><span class="s1">&#39;play&#39;</span><span class="p">,</span>
    <span class="n">row_id_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">ignore_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">citation</span><span class="o">=</span><span class="n">citation</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">version_label</span><span class="o">=</span><span class="s1">&#39;example&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upload_did</span> <span class="o">=</span> <span class="n">weather_dataset</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;URL for dataset: </span><span class="si">%s</span><span class="s1">/data/</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">openml</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">server</span><span class="p">,</span> <span class="n">upload_did</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>URL for dataset: https://test.openml.org/api/v1/xml/data/15187
</pre></div>
</div>
</div>
<div class="section" id="dataset-is-a-sparse-matrix">
<h1>Dataset is a sparse matrix<a class="headerlink" href="#dataset-is-a-sparse-matrix" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sparse_data</span> <span class="o">=</span> <span class="n">coo_matrix</span><span class="p">((</span>
    <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
    <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="p">))</span>

<span class="n">column_names</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;input1&#39;</span><span class="p">,</span> <span class="s1">&#39;REAL&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;input2&#39;</span><span class="p">,</span> <span class="s1">&#39;REAL&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;REAL&#39;</span><span class="p">),</span>
<span class="p">]</span>

<span class="n">xor_dataset</span> <span class="o">=</span> <span class="n">create_dataset</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;XOR&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Dataset representing the XOR operation&#39;</span><span class="p">,</span>
    <span class="n">creator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">contributor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">language</span><span class="o">=</span><span class="s1">&#39;English&#39;</span><span class="p">,</span>
    <span class="n">licence</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">default_target_attribute</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
    <span class="n">row_id_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">ignore_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">citation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">column_names</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">sparse_data</span><span class="p">,</span>
    <span class="n">version_label</span><span class="o">=</span><span class="s1">&#39;example&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upload_did</span> <span class="o">=</span> <span class="n">xor_dataset</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;URL for dataset: </span><span class="si">%s</span><span class="s1">/data/</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">openml</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">server</span><span class="p">,</span> <span class="n">upload_did</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>URL for dataset: https://test.openml.org/api/v1/xml/data/15188
</pre></div>
</div>
</div>
<div class="section" id="dataset-is-a-pandas-sparse-dataframe">
<h1>Dataset is a pandas sparse dataframe<a class="headerlink" href="#dataset-is-a-pandas-sparse-dataframe" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sparse_data</span> <span class="o">=</span> <span class="n">coo_matrix</span><span class="p">((</span>
    <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
    <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="p">))</span>
<span class="n">column_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;input1&#39;</span><span class="p">,</span> <span class="s1">&#39;input2&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">SparseDataFrame</span><span class="p">(</span><span class="n">sparse_data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">column_names</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>

<span class="n">xor_dataset</span> <span class="o">=</span> <span class="n">create_dataset</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;XOR&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Dataset representing the XOR operation&#39;</span><span class="p">,</span>
    <span class="n">creator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">contributor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">language</span><span class="o">=</span><span class="s1">&#39;English&#39;</span><span class="p">,</span>
    <span class="n">licence</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">default_target_attribute</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
    <span class="n">row_id_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">ignore_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">citation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">version_label</span><span class="o">=</span><span class="s1">&#39;example&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.sparse.frame.SparseDataFrame&#39;&gt;
RangeIndex: 4 entries, 0 to 3
Data columns (total 3 columns):
input1    3 non-null Sparse[float64, nan]
input2    2 non-null Sparse[float64, nan]
y         2 non-null Sparse[float64, nan]
dtypes: Sparse[float64, nan](3)
memory usage: 176.0 bytes
None
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upload_did</span> <span class="o">=</span> <span class="n">xor_dataset</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;URL for dataset: </span><span class="si">%s</span><span class="s1">/data/</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">openml</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">server</span><span class="p">,</span> <span class="n">upload_did</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>URL for dataset: https://test.openml.org/api/v1/xml/data/15189
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openml</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">stop_using_configuration_for_example</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  5.455 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-create-upload-tutorial-py">
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../_downloads/cfed637ede9071636ff8da65fe73607a/create_upload_tutorial.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">create_upload_tutorial.py</span></code></a></p>
</div>
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../_downloads/a87e25a750fc6a20f872b64f97151bbe/create_upload_tutorial.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">create_upload_tutorial.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014-2019, the OpenML-Python team..<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>