<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Strang et al. (2018) &#8212; OpenML 0.14.0dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/codehighlightstyle.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body>
  
  <a href="https://github.com/openml/openml-python"
     class="visible-desktop hidden-xs"><img
    id="gh-banner"
    style="position: absolute; top: 50px; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
    alt="Fork me on GitHub"></a>
  <script>
    // Adjust banner height.
    $(function () {
      var navHeight = $(".navbar .container").css("height");
      $("#gh-banner").css("top", navHeight);
    });
  </script>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          OpenML</a>
        <span class="navbar-text navbar-version pull-left"><b>0.14.0dev</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../index.html">Start</a></li>
                <li><a href="../../usage.html">User Guide</a></li>
                <li><a href="../../api.html">API</a></li>
                <li><a href="../index.html">Examples</a></li>
                <li><a href="../../extensions.html">Extensions</a></li>
                <li><a href="../../contributing.html">Contributing</a></li>
                <li><a href="../../progress.html">Changelog</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Strang et al. (2018)</a><ul>
<li><a class="reference internal" href="#publication">Publication</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-examples-40-paper-2018-ida-strang-example-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="strang-et-al-2018">
<span id="sphx-glr-examples-40-paper-2018-ida-strang-example-py"></span><h1>Strang et al. (2018)<a class="headerlink" href="#strang-et-al-2018" title="Permalink to this heading">¶</a></h1>
<p>A tutorial on how to reproduce the analysis conducted for <em>Don’t Rule Out Simple Models
Prematurely: A Large Scale Benchmark Comparing Linear and Non-linear Classifiers in OpenML</em>.</p>
<section id="publication">
<h2>Publication<a class="headerlink" href="#publication" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Don’t Rule Out Simple Models Prematurely: A Large Scale Benchmark Comparing Linear and Non-linear Classifiers in OpenML</div>
<div class="line">Benjamin Strang, Peter van der Putten, Jan N. van Rijn and Frank Hutter</div>
<div class="line">In <em>Advances in Intelligent Data Analysis XVII 17th International Symposium</em>, 2018</div>
<div class="line">Available at <a class="reference external" href="https://link.springer.com/chapter/10.1007%2F978-3-030-01768-2_25">https://link.springer.com/chapter/10.1007%2F978-3-030-01768-2_25</a></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># License: BSD 3-Clause</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">openml</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
<p>A basic step for each data-mining or machine learning task is to determine
which model to choose based on the problem and the data at hand. In this
work we investigate when non-linear classifiers outperform linear
classifiers by means of a large scale experiment.</p>
<p>The paper is accompanied with a study object, containing all relevant tasks
and runs (<code class="docutils literal notranslate"><span class="pre">study_id=123</span></code>). The paper features three experiment classes:
Support Vector Machines (SVM), Neural Networks (NN) and Decision Trees (DT).
This example demonstrates how to reproduce the plots, comparing two
classifiers given the OpenML flow ids. Note that this allows us to reproduce
the SVM and NN experiment, but not the DT experiment, as this requires a bit
more effort to distinguish the same flow with different hyperparameter
values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">study_id</span> <span class="o">=</span> <span class="mi">123</span>
<span class="c1"># for comparing svms: flow_ids = [7754, 7756]</span>
<span class="c1"># for comparing nns: flow_ids = [7722, 7729]</span>
<span class="c1"># for comparing dts: flow_ids = [7725], differentiate on hyper-parameter value</span>
<span class="n">classifier_family</span> <span class="o">=</span> <span class="s2">&quot;SVM&quot;</span>
<span class="n">flow_ids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7754</span><span class="p">,</span> <span class="mi">7756</span><span class="p">]</span>
<span class="n">measure</span> <span class="o">=</span> <span class="s2">&quot;predictive_accuracy&quot;</span>
<span class="n">meta_features</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;NumberOfInstances&quot;</span><span class="p">,</span> <span class="s2">&quot;NumberOfFeatures&quot;</span><span class="p">]</span>
<span class="n">class_values</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;non-linear better&quot;</span><span class="p">,</span> <span class="s2">&quot;linear better&quot;</span><span class="p">,</span> <span class="s2">&quot;equal&quot;</span><span class="p">]</span>

<span class="c1"># Downloads all evaluation records related to this study</span>
<span class="n">evaluations</span> <span class="o">=</span> <span class="n">openml</span><span class="o">.</span><span class="n">evaluations</span><span class="o">.</span><span class="n">list_evaluations</span><span class="p">(</span>
    <span class="n">measure</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">flows</span><span class="o">=</span><span class="n">flow_ids</span><span class="p">,</span> <span class="n">study</span><span class="o">=</span><span class="n">study_id</span><span class="p">,</span> <span class="n">output_format</span><span class="o">=</span><span class="s2">&quot;dataframe&quot;</span>
<span class="p">)</span>
<span class="c1"># gives us a table with columns data_id, flow1_value, flow2_value</span>
<span class="n">evaluations</span> <span class="o">=</span> <span class="n">evaluations</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;data_id&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;flow_id&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="c1"># downloads all data qualities (for scatter plot)</span>
<span class="n">data_qualities</span> <span class="o">=</span> <span class="n">openml</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span>
    <span class="n">data_id</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">evaluations</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> <span class="n">output_format</span><span class="o">=</span><span class="s2">&quot;dataframe&quot;</span>
<span class="p">)</span>
<span class="c1"># removes irrelevant data qualities</span>
<span class="n">data_qualities</span> <span class="o">=</span> <span class="n">data_qualities</span><span class="p">[</span><span class="n">meta_features</span><span class="p">]</span>
<span class="c1"># makes a join between evaluation table and data qualities table,</span>
<span class="c1"># now we have columns data_id, flow1_value, flow2_value, meta_feature_1,</span>
<span class="c1"># meta_feature_2</span>
<span class="n">evaluations</span> <span class="o">=</span> <span class="n">evaluations</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_qualities</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

<span class="c1"># adds column that indicates the difference between the two classifiers</span>
<span class="n">evaluations</span><span class="p">[</span><span class="s2">&quot;diff&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">evaluations</span><span class="p">[</span><span class="n">flow_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">-</span> <span class="n">evaluations</span><span class="p">[</span><span class="n">flow_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</pre></div>
</div>
<p>makes the s-plot</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig_splot</span><span class="p">,</span> <span class="n">ax_splot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax_splot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">evaluations</span><span class="p">)),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">evaluations</span><span class="p">[</span><span class="s2">&quot;diff&quot;</span><span class="p">]))</span>
<span class="n">ax_splot</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">classifier_family</span><span class="p">)</span>
<span class="n">ax_splot</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Dataset (sorted)&quot;</span><span class="p">)</span>
<span class="n">ax_splot</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;difference between linear and non-linear classifier&quot;</span><span class="p">)</span>
<span class="n">ax_splot</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_2018_ida_strang_example_001.png" srcset="../../_images/sphx_glr_2018_ida_strang_example_001.png" alt="SVM" class = "sphx-glr-single-img"/><p>adds column that indicates the difference between the two classifiers,
needed for the scatter plot</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">determine_class</span><span class="p">(</span><span class="n">val_lin</span><span class="p">,</span> <span class="n">val_nonlin</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">val_lin</span> <span class="o">&lt;</span> <span class="n">val_nonlin</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">class_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">val_nonlin</span> <span class="o">&lt;</span> <span class="n">val_lin</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">class_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">class_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>


<span class="n">evaluations</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">evaluations</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">determine_class</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">flow_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">row</span><span class="p">[</span><span class="n">flow_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>

<span class="c1"># does the plotting and formatting</span>
<span class="n">fig_scatter</span><span class="p">,</span> <span class="n">ax_scatter</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="k">for</span> <span class="n">class_val</span> <span class="ow">in</span> <span class="n">class_values</span><span class="p">:</span>
    <span class="n">df_class</span> <span class="o">=</span> <span class="n">evaluations</span><span class="p">[</span><span class="n">evaluations</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">class_val</span><span class="p">]</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df_class</span><span class="p">[</span><span class="n">meta_features</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">df_class</span><span class="p">[</span><span class="n">meta_features</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">label</span><span class="o">=</span><span class="n">class_val</span><span class="p">)</span>
<span class="n">ax_scatter</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">classifier_family</span><span class="p">)</span>
<span class="n">ax_scatter</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">meta_features</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax_scatter</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">meta_features</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ax_scatter</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax_scatter</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">)</span>
<span class="n">ax_scatter</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_2018_ida_strang_example_002.png" srcset="../../_images/sphx_glr_2018_ida_strang_example_002.png" alt="SVM" class = "sphx-glr-single-img"/><p>makes a scatter plot where each data point represents the performance of the
two algorithms on various axis (not in the paper)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig_diagplot</span><span class="p">,</span> <span class="n">ax_diagplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax_diagplot</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
<span class="n">ax_diagplot</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">ls</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">ax_diagplot</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">],</span> <span class="n">ls</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">ax_diagplot</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span> <span class="n">ls</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">ax_diagplot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">evaluations</span><span class="p">[</span><span class="n">flow_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">evaluations</span><span class="p">[</span><span class="n">flow_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<span class="n">ax_diagplot</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span>
<span class="n">ax_diagplot</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_2018_ida_strang_example_003.png" srcset="../../_images/sphx_glr_2018_ida_strang_example_003.png" alt="2018 ida strang example" class = "sphx-glr-single-img"/><p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  2.412 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-40-paper-2018-ida-strang-example-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/ae217469b5304eb1a9415c36e1db590f/2018_ida_strang_example.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">2018_ida_strang_example.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/51e951fb65905058a563b0f066ec5771/2018_ida_strang_example.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">2018_ida_strang_example.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014-2023, the OpenML-Python team.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.0.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>